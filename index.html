<!DOCTYPE html>
<html lang="en">
    <title>Beat the wizard, park the car!</title>
    <head>
            <meta charset="utf-8">
            <meta http-equiv="X-UA-Compatible" content="IE=edge">
            <meta name="viewport" content="width=device-width, initial-scale=1">

            <link href="https://fonts.googleapis.com/css?family=BioRhyme:400,800&display=swap" rel="stylesheet"> 
            <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.css">
            <link rel="stylesheet" type="text/css" href="css/rc.css">
            <link rel="stylesheet" type="text/css" href="css/fireworks.css">
    </head>

    <body data-bind="with: game" >
        <div id="wrapper">
            <div id="gameplanGraphic" data-bind="style: { width: model.sizeX() * 40 }">
                <div id="explosion" data-bind="style: { top: model.guiCarX, left: model.guiCarY }, css: { fire: model.crash }"></div>
    
                    <div data-bind="foreach: { data: model.space, as: 'row' }">
                
                        <div class="row" data-bind="foreach: row ">
                            
                            <div class="tile" data-bind="
                                class: function() { return '_'+ Math.ceil(Math.random() * 5); }(), 
                                css: { 
                                    left: $index() === 0, 
                                    right: $index() === app.models.game.model.sizeY() - 1, 
                                    top: $parentContext.$index() === 0, 
                                    bottom: $parentContext.$index() === app.models.game.model.sizeX() - 1 
                                }">
                            </div>                       
                        </div>
                    </div>
    
                <div id="car" data-bind="class: model.carDirection, style: { top: model.guiCarX, left: model.guiCarY }"></div>
            </div>
        </div>

        <div class="pyro" style="display: none;" data-bind="visible: model.success">
            <div class="before"></div>
            <div class="after"></div>
        </div>


        <div id="preload">

            <audio id="preload0" controls preload="auto"> 
                <source src="audio/start.mp3" type="audio/mpeg"> 
            </audio> 

            <audio id="preload1" controls preload="auto"> 
                <source src="audio/ingame.mp3" type="audio/mpeg"> 
            </audio> 

            <audio id="preload2" controls preload="auto"> 
                <source src="audio/win.mp3" type="audio/mpeg"> 
            </audio> 

            <audio id="preload3" controls preload="auto"> 
                <source src="audio/loose.mp3" type="audio/mpeg"> 
            </audio> 


            <div class="preloadCar E"></div>
            <div class="preloadCar S"></div>
            <div class="preloadCar W"></div>

        </div>

    </body>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.all.min.js" integrity="sha256-2RS1U6UNZdLS0Bc9z2vsvV4yLIbJNKxyA4mrx5uossk=" crossorigin="anonymous"></script>
    <script src="js/vendor/lodash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.5.0/knockout-min.js"></script>

    <script src="js/rc.js"></script>
    <script src="js/models/game.js"></script>
    <script src="js/models/audio.js"></script>

</html>